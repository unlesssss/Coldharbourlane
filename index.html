<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Coldharbour Lane UG</title>

  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png">

  <style>
    :root{
      --pad: clamp(16px, 3vw, 48px);
      --small: clamp(11px, 1vw, 14px);
      --base: clamp(12px, 1.1vw, 15px);
      --gap: clamp(12px, 2vw, 20px);
      --media-ar: 16/9; /* JS updates to actual video ratio at runtime */
    }

    html, body {
      margin: 0; height: 100%; overflow: hidden;
      background: #fff; font-family: "Times New Roman", Times, serif; color: #000;
    }
    .page { position: relative; height: 100vh; width: 100vw; }

    .brand {
      position: absolute; top: var(--pad); left: var(--pad);
      line-height: 1.2; font-size: var(--small); user-select: none;
    }
    .center {
      position: absolute; inset: 0;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      gap: var(--gap); padding: calc(var(--pad) * 2) var(--pad); text-align: center;
    }

    /* ===== Media box (fixed height via aspect-ratio) ===== */
    .video-container {
      max-width: 520px; width: 100%;
      position: relative;
      aspect-ratio: var(--media-ar);
      overflow: hidden;
      background: #000; /* letterbox/pillarbox background */
    }
    /* Stack all media exactly on top of each other; fade between them */
    .video-container > * {
      position: absolute; inset: 0;
      width: 100%; height: 100%;
      display: block;
      transition: opacity .18s ease-in-out;
      background: #000; /* ensure bars are black for imgs/PDFs */
    }
    /* Keep video filling (like before) */
    .video-container video { object-fit: cover; opacity: 1; }

    /* Images/PDFs: show everything (no crop) */
    .video-container img { object-fit: contain; opacity: 0; pointer-events: none; }
    .video-container embed { opacity: 0; pointer-events: none; }

    /* When an image/PDF is active, swap visibility */
    .video-container.show-image video { opacity: 0; }
    .video-container.show-image img,
    .video-container.show-image embed { opacity: 1; }

    .text-block { margin-top: 32px; }
    .section-title { margin: 0 0 4px 0; font-size: var(--base); font-style: italic; font-weight: 700; }
    .clients, .address { list-style: none; margin: 0; padding: 0; font-size: var(--base); line-height: 1.4; }
    .clients li { cursor: pointer; }
    .clients li:focus { outline: 1px dotted #000; outline-offset: 2px; }
    .address { margin-top: 20px; }
    .address a, .address a:visited { color: inherit; text-decoration: none; }
  </style>
</head>
<body>
  <div class="page">
    <div class="brand">
      <div>Coldharbour Lane UG</div>
      <div>&copy; 2025</div>
    </div>

    <main class="center">
      <div class="video-container" id="mediaBox" aria-live="polite">
        <!-- Base video -->
        <video id="heroVideo" autoplay loop muted playsinline>
          <source src="COLDHARBOURLANEUK.mov" type="video/quicktime">
          <source src="COLDHARBOURLANEUK.mp4" type="video/mp4">
          Ihr Browser unterstützt das Video-Tag nicht.
        </video>
        <!-- Swapped-in client image -->
        <img id="clientImage" alt="" />
        <!-- PDF preview gets injected as <embed id="pdfPreview"> when needed -->
      </div>

      <div class="text-block">
        <h2 class="section-title">Clients:</h2>
        <ul class="clients" id="clientsList">
          <li tabindex="0" data-img="032c.jpeg">032c</li>
          <li tabindex="0" data-img="Kadewe.pdf">KaDeWe</li>
          <li tabindex="0" data-img="dalstonjazzbar.jpeg">Dalston Jazz Bar</li>
          <li tabindex="0" data-img="ernstbusch.jpeg">Ernst Busch Berlin</li>
          <li tabindex="0" data-img="langstonuibel.jpeg">Langston Uibel</li>
        </ul>

        <ul class="address">
          <li>Sportforumstrasse 7</li>
          <li>14053 Berlin</li>
          <li><a href="tel:+4915228007373">+49&nbsp;152&nbsp;2800&nbsp;73&nbsp;73</a></li>
          <li><a href="mailto:pele@coldharbourlane.com">pele@coldharbourlane.com</a></li>
        </ul>
      </div>
    </main>
  </div>

  <script>
    (function () {
      const mediaBox = document.getElementById('mediaBox');
      const imgEl    = document.getElementById('clientImage');
      const videoEl  = document.getElementById('heroVideo');
      const list     = document.getElementById('clientsList');

      // Lock the container’s ratio to the actual video once metadata is ready
      videoEl.addEventListener('loadedmetadata', () => {
        try {
          const w = videoEl.videoWidth || 16;
          const h = videoEl.videoHeight || 9;
          if (w > 0 && h > 0) {
            document.documentElement.style.setProperty('--media-ar', `${w}/${h}`);
          }
        } catch (_) {}
      });

      function showImage(src){
        // Remove any existing PDF embed when switching
        const oldEmb = mediaBox.querySelector('embed#pdfPreview');
        if (oldEmb) oldEmb.remove();

        if (src.toLowerCase().endsWith('.pdf')) {
          const emb = document.createElement('embed');
          emb.id   = 'pdfPreview';
          emb.type = 'application/pdf';
          // page-fit ensures FULL page in the box (no crop)
          emb.src  = src + '#zoom=page-fit';
          emb.style.width = '100%';
          emb.style.height = '100%';
          emb.style.background = '#000';
          emb.style.position = 'absolute';
          emb.style.inset = '0';
          mediaBox.appendChild(emb);
          imgEl.removeAttribute('src');
        } else {
          imgEl.src = src;
        }

        mediaBox.classList.add('show-image');
        // Pause video while image shown
        videoEl.pause();
      }

      function showVideo(){
        // Clean up any PDF embed
        const emb = mediaBox.querySelector('embed#pdfPreview');
        if (emb) emb.remove();

        mediaBox.classList.remove('show-image');
        videoEl.play().catch(()=>{});
      }

      // Preload non-PDF images for instant swap
      Array.from(list.querySelectorAll('li[data-img]')).forEach(li=>{
        const src = li.getAttribute('data-img');
        if (src && !src.toLowerCase().endsWith('.pdf')) { const i = new Image(); i.src = src; }
      });

      // Desktop hover
      list.addEventListener('mouseover', e=>{
        const li = e.target.closest('li[data-img]');
        if (li) showImage(li.dataset.img);
      });
      list.addEventListener('mouseout', e=>{
        const to = e.relatedTarget;
        if (!list.contains(to)) showVideo();
      });

      // Keyboard focus
      list.addEventListener('focusin', e=>{
        const li = e.target.closest('li[data-img]');
        if (li) showImage(li.dataset.img);
      });
      list.addEventListener('focusout', e=>{
        const to = e.relatedTarget;
        if (!list.contains(to)) showVideo();
      });

      // Click/tap on a client to show; click/tap outside to revert
      list.addEventListener('click', e=>{
        const li = e.target.closest('li[data-img]');
        if (!li) return;
        e.stopPropagation();
        showImage(li.dataset.img);
      });
      list.addEventListener('touchstart', e=>{
        const li = e.target.closest('li[data-img]');
        if (!li) return;
        e.stopPropagation();
        showImage(li.dataset.img);
      }, {passive:true});

      document.addEventListener('click', e=>{
        if (!list.contains(e.target) && !mediaBox.contains(e.target)) showVideo();
      });
      document.addEventListener('touchstart', e=>{
        if (!list.contains(e.target) && !mediaBox.contains(e.target)) showVideo();
      }, {passive:true});
    })();
  </script>
</body>
</html>
